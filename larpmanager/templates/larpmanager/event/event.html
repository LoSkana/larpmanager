{% extends "base.html" %}
{% load tz show_tags static i18n %}
{% block title %}
    {{ event.name }}
{% endblock title %}
{% block robots %}
    {% include "elements/robots_show.html" %}
{% endblock robots %}
{% block media %}
    <meta name="description" content="{{ event.tagline }}" />
    <meta property="og:title" content="{{ event.name }}" />
    {% if event.tagline %}<meta property="og:description" content="{{ event.tagline }}" />{% endif %}
    <meta property="og:image" content="{{ event.cover }}" />
{% endblock media %}
{% block content %}
    {% if event.cover %}
        <div id="aspect-ratio">
            <div id="event_cover"
                 class="nav"
                 style="background-image: url({{ event.cover }})"></div>
        </div>
    {% endif %}
    <!--<h1 class="major">{{ name }}</h1> -->
    {% if event.tagline %}
        <p>
            <b>{{ event.tagline }}</b>
        </p>
        <hr />
    {% endif %}
    {% if event.tagline %}
        <p>
            <i>{{ event.genre }}</i>
        </p>
        <hr />
    {% endif %}
    {% if event.description %}
        <p>{{ event.description | safe }}</p>
        <hr />
    {% endif %}
    {% if event.where %}
        <p>
            <b>{% trans "Where" %}:</b> {{ event.where }}
        </p>
        <hr />
    {% endif %}
    {% if event.authors %}
        <p>
            <b>{% trans "Authors" %}:</b> {{ event.authors }}
        </p>
        <hr />
    {% endif %}
    {% if event.website %}
        <p>
            <a href="{{ event.website }}" class="button primary" target="_blank">{% trans "Discover the web site" %}!</a>
        </p>
        <hr />
    {% endif %}
    <h2>{% trans "Next sessions" %}</h2>
    {% if coming %}
        <div class="no-more-tables">
            <table class="mob">
                <thead>
                    <tr>
                        <th>{% trans "Name" %}</th>
                        <th>{% trans "Date" %}</th>
                        <th>{% trans "Registrations" %}</th>
                    </tr>
                </thead>
                {% for run in coming %}
                    <tr>
                        <td data-title="{% trans "Name" %}">
                            <h3>
                                <a href="{% url 'gallery' run.get_slug %}">{{ run.search }}</a>
                            </h3>
                        </td>
                        <td data-title="{% trans "Date" %}">
                            <i>{{ run.pretty_dates }} </i>
                        </td>
                        <td data-title="{% trans "Registrations" %}">{% include "elements/reg_status.html" with run=run %}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    {% else %}
        <table class="mob">
            <tr>
                <th>
                    {% trans "There are no new sessions scheduled at this time" %}.
                    {% if features.pre_register %}
                        <a href="{% url 'pre_register' event.slug %}">{% trans "Pre-register here" %}!</a>
                        {% trans "You will be notified when a new session is organized, and you will have fast-track on registration" %}!
                    </th>
                </tr>
            {% endif %}
        </table>
    {% endif %}
    {% if past %}
        <br />
        <div class="no-more-tables">
            <h2>
                <a class="my_toggle" tog="past-runs" href="#">{% trans "Past sessions" %}</a>
            </h2>
            <table class="hide past-runs">
                <thead>
                    <tr>
                        <th>{% trans "Name" %}</th>
                        <th>{% trans "Date" %}</th>
                        <th>{% trans "Link" %}</th>
                        <th>{% trans "Character" %}</th>
                    </tr>
                </thead>
                {% for run in past %}
                    <tr>
                        <td data-title="{% trans "Name" %}">
                            <h3>{{ run.search }}</h3>
                        </td>
                        <td data-title="{% trans "Date" %}">
                            <i>{{ run.pretty_dates }} </i>
                        </td>
                        <td data-title="{% trans "Link" %}">
                            <a href="{% url 'gallery' run.get_slug %}">{% trans "Gallery" %}</a>
                        </td>
                        <td data-title="{% trans "Character" %}">
                            {% if run.reg and run.reg.character %}
                                <a href="{% url 'character' run.get_slug run.reg.character.number %}">{{ run.reg.display_character }}</a>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    {% endif %}
{% endblock content %}
